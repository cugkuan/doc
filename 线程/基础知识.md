# 概述

**什么是自旋**

在Java中，自旋是指在多线程编程中，当线程尝试获得某个锁时，如果该锁已经被其他线程占用，线程会一直循环检查该锁是否被释放，直到获取到该锁为止。 这个循环等待的过程被称为自旋。 自旋的主要目的是避免线程切换带来的开销。


**什么是可重入**

从函数的角度，输入相同，无论是怎么调用，其结果一定相同。

```
int add(int a,int b){
    return a+b;
}
```

**线程的可重入锁**
ReentrantLock

**“可重入”的目的不是为了“再次加锁”，而是为了支持复杂场景下的「递归调用」「嵌套调用」「模板方法调用」等，不至于死锁自己**。




## 什么是乐观锁什么是悲观锁

https://zhuanlan.zhihu.com/p/40211594



## 原子性，可见性个有序性


学习线程，先弄懂 原子性，可见性和有序性；线程中绝大多数知识都围绕着这个转。很多的手段也是为了这三个目标。


在学习这些的时候，先了解CPU cache 模型和 Jvm 内存模型

下面的文章说的很明确了

https://www.cnblogs.com/privateNotesOfAidanChen/p/12897881.html


简单的说，线程有自己的CupCache，线程到数据复制到Cache，数据操作在cache中，这个过程中主存和线程Cache 不一致问题。

- 有序性 防止代码重排
- 可见性   cup cache 缓存一致性
- 原子性  代表操作不可再分


volatile 能保证可见性和防止重排，但是不能保证原子性。保证原子性，通过 AtomicInteger 锁  syn* 等来保证。

# JVM 的内存模型

- Jvm 基本的读取，赋值是原子性操作，其它的不保证


